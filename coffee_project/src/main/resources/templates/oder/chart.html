<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Biểu đồ lịch sử doanh thu</title>
    <link rel="shortcut icon" href="/static/android-chrome-512x512.png" th:href="@{/android-chrome-512x512.png}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style th:insert="/layout::style"></style>
    <link rel="stylesheet" th:href="@{/bootstrap-5.0.2-dist/css/bootstrap.css}"
          href="../static/bootstrap-5.0.2-dist/css/bootstrap.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        .content {
            transform: scale(0.94); /* Giá trị scale nhỏ hơn 1 để thu nhỏ nội dung */
        }
    </style>
</head>
<body style="background-color: #eeeeee">
<div class="container-fluid">
    <div class="row">
        <div th:replace="layout::side-bar">
        </div>
        <div class="col-10  col-sm-9 col-md-9 col-lg-10">
            <div th:replace="layout::nav-bar">
            </div>
            <div class="row min-vh-100 content">
                <div class="col-12">
                    <br>
                    <h1 style="text-align: center">Biểu Đồ Lịch Sử Doanh Thu </h1>
                    <div class="content">
                        <div>
                            <input type="hidden" th:value="${msg0}" id="msg0">
                            <input type="hidden" th:value="${msg1}" id="msg1">
                            <input type="hidden" th:value="${msg2}" id="msg2">
                            <input type="hidden" th:value="${msg3}" id="msg3">
                        </div>
                        <div class="d-flex justify-content-center">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div th:replace="layout::footer">
            </div>
        </div>
    </div>
</div>
<script th:src="@{/bootstrap-5.0.2-dist/js/bootstrap.bundle.js}"
        src="../static/bootstrap-5.0.2-dist/js/bootstrap.bundle.js"></script>
<script>
    // Trả về tháng
    let currentDate = new Date();
    let month = currentDate.getMonth(); // Cộng 1 vì chỉ số của tháng là từ 0 đến 11
    let month1 = currentDate.getMonth() - 1; // Cộng 1 vì chỉ số của tháng là từ 0 đến 11
    let month2 = currentDate.getMonth() - 2;
    let month3 = currentDate.getMonth() - 3;
    let msg0 = document.getElementById("msg0").value;
    let msg1 = document.getElementById("msg1").value;
    let msg2 = document.getElementById("msg2").value;
    let msg3 = document.getElementById("msg3").value;
    // Lấy dữ liệu doanh thu từ nguồn dữ liệu
    const revenueData = {
        labels: ['Tháng ' + (month3 + 1), 'Tháng ' + (month2 + 1), 'Tháng ' + (month1 + 1), 'Tháng ' + (month + 1)],
        datasets: [{
            data: [msg0, msg1, msg2, msg3],
            backgroundColor: ['rgba(75, 192, 192, 0.2)', 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 0, 235, 0.2)'],
            borderColor: ['rgba(75, 192, 192, 1)', 'rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 0, 235, 1)'],
            borderWidth: 1
        }]
    };
    // Vẽ biểu đồ
    const ctx = document.getElementById('revenueChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: revenueData,
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
</body>
</html>